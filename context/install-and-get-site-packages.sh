#!/usr/bin/env sh

set -e

if [ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ]; then
  echo "Must run with arguments: pip-dep version-string dest" >&2
  exit 1
fi

pip install "$1$2"

packagedir=$(python3 -c "import $1, os; print(os.path.dirname($1.__file__))")

ln -snf "${packagedir}" "$3"
